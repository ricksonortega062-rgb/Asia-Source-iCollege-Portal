@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=DM+Sans:wght@300;400;500;600;700&display=swap');

/* ══ CSS VARIABLES ══ */
:root{
  --red:#c0000a; --red-dk:#7a0006; --red-deep:#3d0003;
  --gold:#d4a017; --gold-lt:#f5c800;
  --bg:#0d0d0d; --bg2:#1a0303; --bg3:#280606; --bg4:#1e0404;
  --card:rgba(30,4,4,.95); --surface:rgba(40,6,6,.8);
  --border:rgba(106,72,72,.5); --border2:rgba(58,40,40,.6);
  --text:#ffffff; --text2:#e0d0d0; --muted:#b09090; --dim:#c0a0a0;
  --input-bg:rgba(0,0,0,.4); --nav-bg:linear-gradient(90deg,#1a0002,#0d0001);
  --panel-l:#0d0003; --green:#2ecc71; --blue:#3498db;
}
[data-theme="light"]{
  --bg:#f5f0f0; --bg2:#fff0f0; --bg3:#ffe8e8; --bg4:#fdf0f0;
  --card:rgba(255,255,255,.98); --surface:rgba(255,240,240,.9);
  --border:rgba(192,0,10,.2); --border2:rgba(192,0,10,.12);
  --text:#1a0303; --text2:#3a1010; --muted:#7a4040; --dim:#6a3030;
  --input-bg:rgba(255,255,255,.8); --nav-bg:linear-gradient(90deg,#7a0006,#c0000a);
  --panel-l:#3d0003;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text);transition:background .3s,color .3s;}
.hidden{display:none!important;}
.page{min-height:100vh;background:var(--bg);}

/* ══ DARK MODE TOGGLE ══ */
.dm-toggle{position:absolute;top:20px;right:20px;z-index:10;display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--border);border-radius:40px;padding:6px 12px;cursor:pointer;font-size:14px;color:var(--text);transition:all .2s;}
.dm-toggle:hover{border-color:var(--gold);}
.dm-track{width:42px;height:22px;background:rgba(255,255,255,.1);border:1px solid var(--border);border-radius:11px;position:relative;transition:background .3s;}
[data-theme="light"] .dm-track{background:rgba(192,0,10,.15);}
.dm-thumb{position:absolute;left:2px;top:2px;width:16px;height:16px;background:var(--muted);border-radius:50%;transition:all .3s;}
[data-theme="light"] .dm-thumb{left:22px;background:var(--red);}
.dm-nav-btn{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:6px 10px;cursor:pointer;font-size:16px;color:var(--text);transition:all .2s;}
.dm-nav-btn:hover{border-color:var(--gold);}

/* ══ LOGIN PAGE ══ */
.lp-wrapper{display:flex;min-height:100vh;width:100%;position:relative;}
.lp-left{flex:0 0 44%;position:relative;overflow:hidden;background:var(--panel-l);display:flex;align-items:center;justify-content:center;}
.lp-glow{position:absolute;top:-100px;right:-100px;width:500px;height:500px;background:radial-gradient(circle,rgba(192,0,10,.3) 0%,transparent 65%);pointer-events:none;z-index:0;}
.lp-glow::after{content:'';position:absolute;bottom:-150px;left:-100px;width:400px;height:400px;background:radial-gradient(circle,rgba(212,160,23,.15) 0%,transparent 65%);}
.lp-grid{position:absolute;inset:0;z-index:0;background-image:linear-gradient(rgba(192,0,10,.07) 1px,transparent 1px),linear-gradient(90deg,rgba(192,0,10,.07) 1px,transparent 1px);background-size:44px 44px;}
.lp-content{position:relative;z-index:2;text-align:center;color:#fff;padding:48px 40px;width:100%;}
.lp-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(212,160,23,.12);border:1px solid rgba(212,160,23,.35);border-radius:40px;padding:6px 18px;font-size:11px;color:var(--gold);margin-bottom:28px;letter-spacing:1px;text-transform:uppercase;}
.lp-dot{width:6px;height:6px;border-radius:50%;background:var(--gold);display:inline-block;animation:pulse 2s infinite;}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1);}50%{opacity:.4;transform:scale(.7);}}
.lp-logo{width:110px;height:110px;border-radius:50%;object-fit:cover;border:4px solid var(--gold);display:block;margin:0 auto 24px;box-shadow:0 0 0 14px rgba(212,160,23,.07),0 0 50px rgba(192,0,10,.5);transition:transform .3s;}
.lp-logo:hover{transform:scale(1.05);}
.lp-title{font-family:'Playfair Display',serif;font-size:32px;font-weight:900;line-height:1.1;color:#fff;margin-bottom:6px;}
.lp-title em{color:var(--gold);font-style:italic;}
.lp-sub{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:rgba(255,255,255,.5);margin-bottom:18px;}
.lp-rule{width:44px;height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:0 auto 16px;}
.lp-desc{font-size:13px;line-height:1.7;color:rgba(255,255,255,.65);max-width:280px;margin:0 auto 28px;font-weight:300;}
.lp-stats{display:flex;justify-content:center;gap:28px;}
.ls-num{font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:var(--gold);display:block;}
.ls-lbl{font-size:9px;letter-spacing:1.5px;text-transform:uppercase;color:rgba(255,255,255,.45);display:block;margin-top:2px;}
.lp-right{flex:1;background:var(--bg);display:flex;align-items:center;justify-content:center;padding:60px 36px;position:relative;overflow-y:auto;}
.lp-right::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,var(--red),var(--gold),transparent);}
.lp-card{width:100%;max-width:440px;background:var(--card);border:1px solid var(--border);border-radius:22px;padding:36px 32px 28px;box-shadow:0 40px 80px rgba(0,0,0,.4);backdrop-filter:blur(12px);transition:background .3s,border-color .3s;}
.lp-card::before{content:'';display:block;height:2px;border-radius:2px;background:linear-gradient(90deg,var(--red),var(--gold),transparent);margin-bottom:26px;}
.lp-card-head{display:flex;align-items:center;gap:14px;margin-bottom:12px;}
.lp-card-logo{width:48px;height:48px;border-radius:50%;object-fit:cover;border:2px solid var(--gold);}
.lp-card-title{font-family:'Playfair Display',serif;font-size:18px;font-weight:700;color:var(--text);}
.lp-card-title span{color:var(--gold);}
.lp-card-sub{font-size:12px;color:var(--muted);margin-top:2px;}
.lp-stripe{display:flex;height:3px;margin:14px 0 22px;border-radius:3px;overflow:hidden;gap:2px;}
.lp-stripe::before{content:'';flex:2;background:var(--red);}
.lp-stripe::after{content:'';flex:2;background:var(--gold);}
.auth-tabs{display:flex;background:var(--input-bg);border:1px solid var(--border2);border-radius:12px;padding:4px;margin-bottom:20px;gap:4px;}
.auth-tab{flex:1;padding:10px;border:none;border-radius:9px;font-family:'DM Sans',sans-serif;font-size:13px;font-weight:700;cursor:pointer;background:transparent;color:var(--muted);transition:all .25s;}
.auth-tab.active{background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;box-shadow:0 4px 16px rgba(192,0,10,.35);}
.role-toggle{display:flex;background:var(--input-bg);border:1px solid var(--border2);border-radius:12px;padding:4px;margin-bottom:18px;gap:4px;}
.role-btn{flex:1;padding:10px;border:none;border-radius:9px;font-family:'DM Sans',sans-serif;font-size:13px;font-weight:600;cursor:pointer;background:transparent;color:var(--muted);transition:all .25s;}
.role-btn.active{background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;box-shadow:0 4px 12px rgba(192,0,10,.3);}
.fg{margin-bottom:15px;}
.fg label{display:block;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--dim);margin-bottom:6px;}
.hint-lbl{font-size:9.5px;color:var(--gold);text-transform:none;letter-spacing:0;font-weight:400;}
.email-wrap{display:flex;align-items:stretch;border:1.5px solid var(--border);border-radius:11px;overflow:hidden;background:var(--input-bg);transition:all .2s;}
.email-wrap:focus-within{border-color:var(--red);box-shadow:0 0 0 3px rgba(192,0,10,.15);}
.email-input{flex:1;padding:12px 11px;border:none!important;outline:none!important;font-family:'DM Sans',sans-serif;font-size:13px;color:var(--text);background:transparent;min-width:0;}
.email-input::placeholder{color:rgba(192,0,10,.3);}
.email-sfx{display:flex;align-items:center;padding:0 10px;font-size:10.5px;color:var(--gold);background:rgba(212,160,23,.08);border-left:1px solid var(--border);white-space:nowrap;font-weight:600;}
.pw-wrap{position:relative;}
.pw-wrap input{width:100%;padding:12px 44px 12px 14px;border:1.5px solid var(--border);border-radius:11px;font-family:'DM Sans',sans-serif;font-size:14px;color:var(--text);background:var(--input-bg);outline:none;transition:all .2s;}
.pw-wrap input:focus{border-color:var(--red);box-shadow:0 0 0 3px rgba(192,0,10,.15);}
.pw-wrap input::placeholder{color:rgba(192,0,10,.3);}
.pw-eye{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:16px;}
.plain-input{width:100%;padding:12px 14px;border:1.5px solid var(--border);border-radius:11px;font-family:'DM Sans',sans-serif;font-size:14px;color:var(--text);background:var(--input-bg);outline:none;transition:all .2s;}
.plain-input:focus{border-color:var(--red);box-shadow:0 0 0 3px rgba(192,0,10,.15);}
.plain-input::placeholder{color:rgba(192,0,10,.3);}
select.plain-input option{background:var(--bg2);color:var(--text);}
.fg-extras{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;font-size:13px;}
.check-lbl{display:flex;align-items:center;gap:6px;color:var(--muted);cursor:pointer;}
.check-lbl input{accent-color:var(--red);}
.link-gold{color:var(--gold);text-decoration:none;font-weight:600;}
.btn-red{width:100%;padding:14px;border:none;border-radius:12px;background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;font-family:'DM Sans',sans-serif;font-size:15px;font-weight:700;cursor:pointer;box-shadow:0 10px 28px rgba(192,0,10,.4);transition:all .2s;letter-spacing:.2px;}
.btn-red:hover{transform:translateY(-2px);filter:brightness(1.1);}
.alert{border-radius:10px;padding:10px 13px;font-size:13px;margin-bottom:12px;font-weight:500;white-space:pre-line;}
.alert.error{background:rgba(192,0,10,.15);border:1px solid rgba(192,0,10,.4);color:#ff9090;}
.alert.success{background:rgba(46,204,113,.12);border:1px solid rgba(46,204,113,.35);color:#5dde92;}
.alert.hidden{display:none;}
.demo-box{background:var(--input-bg);border:1px solid var(--border2);border-radius:10px;padding:10px 14px;margin-top:16px;font-size:11.5px;}
.demo-title{font-weight:700;color:var(--text);font-size:10px;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;}
.demo-row{display:flex;justify-content:space-between;gap:10px;padding:2px 0;color:var(--muted);}
.demo-row span:last-child{color:var(--text);word-break:break-all;text-align:right;}
.demo-divider{height:1px;background:var(--border2);margin:7px 0;}
.demo-note{font-size:10px;color:var(--gold);margin-top:7px;font-weight:600;letter-spacing:.3px;}
.auth-switch{text-align:center;font-size:13px;color:var(--muted);margin-top:14px;}

/* ══ NAV ══ */
.dash-nav{background:var(--nav-bg);border-bottom:3px solid var(--red);padding:12px 24px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;box-shadow:0 4px 20px rgba(0,0,0,.4);transition:background .3s;}
.dash-brand{font-family:'Playfair Display',serif;font-size:16px;font-weight:700;color:#fff;display:flex;align-items:center;gap:10px;}
.dash-brand img{width:30px;height:30px;border-radius:50%;object-fit:cover;border:2px solid var(--gold);}
.nav-right{display:flex;align-items:center;gap:8px;}
.user-pill{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:40px;padding:5px 14px 5px 5px;font-size:13px;font-weight:600;color:#fff;}
.uavatar{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--red),var(--red-dk));display:flex;align-items:center;justify-content:center;font-size:13px;color:#fff;}
.uavatar.t{background:linear-gradient(135deg,#1e40af,#1e3a8a);}
.btn-logout{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:8px;padding:7px 16px;font-family:'DM Sans',sans-serif;font-size:13px;font-weight:600;cursor:pointer;color:#ffb0b0;transition:.2s;}
.btn-logout:hover{background:rgba(192,0,10,.3);color:#fff;}

/* ══ DASH BODY ══ */
.dash-body{padding:20px;max-width:100%;margin:0 auto;}

/* ══ STUDENT LAYOUT ══ */
.stu-layout{display:grid;grid-template-columns:250px 1fr;gap:20px;align-items:start;}
.stu-sidebar{position:sticky;top:80px;}
.profile-card{background:var(--surface);border:1px solid var(--border);border-radius:18px;padding:24px 18px;text-align:center;margin-bottom:14px;box-shadow:0 8px 24px rgba(0,0,0,.3);transition:background .3s,border-color .3s;}
.profile-card::before{content:'';display:block;height:2px;background:linear-gradient(90deg,var(--red),var(--gold));margin-bottom:18px;border-radius:2px;}
.pc-avatar{font-size:48px;margin-bottom:10px;}
.pc-name{font-family:'Playfair Display',serif;font-size:16px;font-weight:700;color:var(--text);margin-bottom:6px;}
.pc-badge{display:inline-block;background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;border-radius:20px;padding:3px 14px;font-size:11px;font-weight:700;margin-bottom:8px;}
.pc-email{font-size:10.5px;color:var(--muted);margin-bottom:10px;word-break:break-all;}
.pc-row{display:flex;justify-content:space-between;font-size:12px;padding:6px 0;border-top:1px solid var(--border2);color:var(--muted);}
.pc-row span:last-child{color:var(--text);font-weight:600;}
.sec-title{font-family:'Playfair Display',serif;font-size:17px;font-weight:700;color:var(--text);margin-bottom:14px;display:flex;align-items:center;gap:8px;}
.sec-title::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--border),transparent);}
.subject-list{display:flex;flex-direction:column;gap:9px;margin-bottom:24px;}
.subject-card{background:var(--surface);border:1px solid var(--border);border-radius:13px;padding:15px 18px;cursor:pointer;transition:all .22s;display:flex;align-items:center;justify-content:space-between;}
.subject-card:hover{border-color:var(--red);transform:translateY(-2px);box-shadow:0 6px 20px rgba(192,0,10,.2);}
.subject-left{display:flex;align-items:center;gap:12px;}
.subject-icon{width:42px;height:42px;border-radius:10px;background:rgba(192,0,10,.15);border:1px solid rgba(192,0,10,.3);display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:800;color:#ff9090;}
.sub-name{font-size:13px;font-weight:700;color:var(--text);}
.sub-teacher{font-size:11px;color:var(--muted);margin-top:2px;}
.subject-grade{text-align:right;}
.grade-num{font-size:22px;font-weight:800;color:var(--gold);font-family:'Playfair Display',serif;}
.grade-label{font-size:9px;color:var(--muted);text-transform:uppercase;}
.grade-pill{display:inline-block;border-radius:20px;padding:2px 9px;font-size:10px;font-weight:700;margin-top:2px;}
.pill-pass{background:rgba(46,204,113,.15);color:#5dde92;border:1px solid rgba(46,204,113,.3);}
.pill-fail{background:rgba(192,0,10,.15);color:#ff9090;border:1px solid rgba(192,0,10,.3);}
.grade-card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px;overflow-x:auto;transition:background .3s;}
.grade-table{width:100%;border-collapse:collapse;font-size:13px;}
.grade-table th{background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;padding:11px 13px;text-align:left;font-weight:700;font-size:12px;}
.grade-table th:first-child{border-radius:8px 0 0 0;}
.grade-table th:last-child{border-radius:0 8px 0 0;}
.grade-table td{padding:11px 13px;border-bottom:1px solid var(--border2);color:var(--text2);}
.grade-table tr:last-child td{border-bottom:none;}
.grade-table tr:hover td{background:rgba(192,0,10,.05);}
.final-col{font-weight:800;font-size:15px;color:var(--text)!important;}

/* ══ TEACHER LAYOUT ══ */
.tch-layout{display:grid;grid-template-columns:230px 1fr;gap:18px;align-items:start;}
.tch-sidebar{position:sticky;top:76px;}
.sidebar-section-lbl{font-size:9.5px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px;padding-left:2px;}
.strand-list{display:flex;flex-direction:column;gap:6px;}
.strand-item{background:var(--surface);border:1px solid var(--border2);border-radius:12px;padding:11px 14px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:10px;}
.strand-item:hover,.strand-item.active{border-color:var(--red);background:rgba(192,0,10,.12);}
.strand-item.active{box-shadow:0 4px 14px rgba(192,0,10,.2);}
.si-icon{font-size:17px;}
.si-name{font-size:13px;font-weight:700;color:var(--text);}
.si-sub{font-size:10px;color:var(--muted);margin-top:1px;}
.tch-main{background:var(--surface);border:1px solid var(--border);border-radius:18px;padding:20px;min-width:0;overflow:hidden;transition:background .3s,border-color .3s;}
.tch-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:18px;gap:12px;flex-wrap:wrap;background:linear-gradient(135deg,rgba(192,0,10,.1),rgba(212,160,23,.05));border:1px solid var(--border);border-radius:14px;padding:16px 18px;position:relative;overflow:hidden;}
.tch-header::before{content:'';position:absolute;top:-30px;right:-30px;width:120px;height:120px;border-radius:50%;background:radial-gradient(circle,rgba(192,0,10,.15),transparent 70%);pointer-events:none;}
.tch-folder-title{font-family:'Playfair Display',serif;font-size:20px;font-weight:900;color:var(--text);margin-bottom:3px;}
.tch-folder-sub{font-size:12px;color:var(--muted);}
.tch-header-right{display:flex;flex-direction:column;gap:8px;align-items:flex-end;}
.view-tabs{display:flex;gap:5px;flex-wrap:wrap;}
.vtab{padding:7px 14px;border-radius:20px;border:1px solid var(--border);background:var(--input-bg);font-family:'DM Sans',sans-serif;font-size:11.5px;font-weight:700;cursor:pointer;color:var(--muted);transition:all .2s;}
.vtab.active{background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;border-color:var(--red);}
.sec-tabs{display:flex;gap:5px;}
.stab{padding:7px 18px;border-radius:20px;border:1px solid var(--border);background:var(--input-bg);font-family:'DM Sans',sans-serif;font-size:11.5px;font-weight:700;cursor:pointer;color:var(--muted);transition:all .2s;}
.stab.active{background:linear-gradient(135deg,#1e40af,#1e3a8a);color:#fff;border-color:#3b82f6;}
.tch-view{animation:fadeIn .2s ease;}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}

/* ══ VIEW TOOLBAR (Gradebook Quarter + Class Record Subject pickers) ══ */
.view-toolbar{margin-bottom:14px;}
.gb-toolbar-inner,.cr-toolbar-inner{
  display:flex;align-items:center;gap:10px;flex-wrap:wrap;
  background:var(--bg4);border:1px solid var(--border);
  border-radius:12px;padding:10px 14px;
}
.toolbar-lbl{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--muted);}

/* Quarter tabs */
.qtr-tabs{display:flex;gap:4px;}
.qtr-btn{
  padding:6px 16px;border-radius:20px;border:1px solid var(--border);
  background:var(--input-bg);font-family:'DM Sans',sans-serif;
  font-size:12px;font-weight:700;cursor:pointer;color:var(--muted);transition:all .2s;
}
.qtr-btn.active{background:linear-gradient(135deg,var(--gold),#b8860b);color:#1a0a00;border-color:var(--gold);}
.qtr-btn:hover:not(.active){border-color:var(--gold);color:var(--gold);}

/* Save button */
.save-qtr-btn{
  margin-left:auto;padding:8px 18px;border-radius:20px;
  background:linear-gradient(135deg,#065f46,#14532d);
  color:#fff;border:1px solid rgba(46,204,113,.3);
  font-family:'DM Sans',sans-serif;font-size:12px;font-weight:700;
  cursor:pointer;transition:all .2s;white-space:nowrap;
}
.save-qtr-btn:hover{filter:brightness(1.15);transform:translateY(-1px);}

/* Subject pills (class record) */
.subj-pills{display:flex;gap:5px;flex-wrap:wrap;flex:1;}
.subj-btn{
  padding:5px 12px;border-radius:20px;border:1.5px solid;
  font-family:'DM Sans',sans-serif;font-size:11px;font-weight:700;
  cursor:pointer;background:transparent;transition:all .2s;
}
.subj-btn:hover{opacity:.85;}
.subj-btn.active{box-shadow:0 3px 10px rgba(0,0,0,.3);}

/* ══ GRADEBOOK TABLE ══ */
.cr-scroll-wrap{overflow-x:auto;border-radius:10px;border:1px solid var(--border);scrollbar-width:thin;scrollbar-color:var(--red-dk) transparent;}
.cr-scroll-wrap::-webkit-scrollbar{height:5px;}
.cr-scroll-wrap::-webkit-scrollbar-thumb{background:var(--red-dk);border-radius:3px;}
.gb-table{width:100%;border-collapse:collapse;font-size:13px;min-width:620px;}
.gb-table th{background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;padding:12px 13px;text-align:center;font-weight:700;font-size:12px;}
.gb-table th.gb-name{text-align:left;}
.gb-table th:first-child{border-radius:8px 0 0 0;text-align:center;}
.gb-table th:last-child{border-radius:0 8px 0 0;}
.gb-table td{padding:10px 12px;border-bottom:1px solid var(--border2);text-align:center;vertical-align:middle;color:var(--text2);}
.gb-table td:nth-child(2){text-align:left;font-weight:600;color:var(--text);}
.gb-table tr:hover td{background:rgba(192,0,10,.05);}
.gb-num{min-width:36px;width:36px;}
.gb-name{min-width:170px;}
.score-input{width:56px;padding:7px 6px;border:1.5px solid var(--border);border-radius:8px;font-family:'DM Sans',sans-serif;font-size:13px;font-weight:600;text-align:center;outline:none;transition:all .2s;background:var(--input-bg);color:var(--text);}
.score-input:focus{border-color:var(--red);box-shadow:0 0 0 3px rgba(192,0,10,.15);}
.final-badge{border-radius:20px;padding:3px 11px;font-size:12px;font-weight:800;display:inline-block;}
.badge-outstanding{background:rgba(46,204,113,.15);color:#5dde92;border:1px solid rgba(46,204,113,.3);}
.badge-vs{background:rgba(52,152,219,.15);color:#7bc8f5;border:1px solid rgba(52,152,219,.3);}
.badge-sat{background:rgba(212,160,23,.15);color:var(--gold);border:1px solid rgba(212,160,23,.3);}
.badge-fs{background:rgba(230,126,34,.15);color:#f0a050;border:1px solid rgba(230,126,34,.3);}
.badge-fail{background:rgba(192,0,10,.15);color:#ff9090;border:1px solid rgba(192,0,10,.3);}
.legend-bar{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px;font-size:11px;color:var(--muted);padding-top:12px;border-top:1px solid var(--border2);}

/* Saved row indicator */
.gb-saved-row td{background:rgba(5,46,22,.2)!important;}
.gb-saved-row:hover td{background:rgba(5,46,22,.35)!important;}
.sync-dot{display:inline-block;margin-left:6px;color:#5dde92;font-size:10.5px;font-weight:800;background:rgba(46,204,113,.15);border:1px solid rgba(46,204,113,.3);border-radius:20px;padding:1px 7px;}

/* ══ CLASS RECORD TABLE ══ */
.cr-table{border-collapse:collapse;font-size:11px;white-space:nowrap;min-width:max-content;width:100%;}
.cr-sticky{position:sticky;z-index:10;background:var(--bg2)!important;}
.cr-num-col{left:0;min-width:32px;width:32px;}
.cr-name-col{left:32px;min-width:160px;width:160px;}
.cr-th{padding:0;border:1px solid rgba(255,255,255,.12);text-align:center;color:#fff;font-weight:700;font-size:9.5px;}
.cr-subj-hdr{padding:7px 5px;font-size:9.5px;letter-spacing:.3px;text-transform:uppercase;}
.cr-qtr-hdr{padding:5px 8px;font-size:10px;}
.cr-final-hdr{padding:5px 8px;font-size:9px;font-weight:800;}
.cr-row{transition:background .12s;}
.cr-alt td.cr-td{background:var(--bg4)!important;}
.cr-row:hover td.cr-td{background:rgba(192,0,10,.07)!important;}
.cr-td{padding:0;border:1px solid rgba(255,255,255,.06);text-align:center;vertical-align:middle;}
.cr-num-td{background:var(--bg2);font-size:9.5px;font-weight:700;color:var(--muted);padding:4px 2px;}
.cr-name-td{background:var(--bg2);text-align:left;padding:6px 10px;font-size:12px;font-weight:600;color:var(--text);}
.cr-score-td{background:var(--bg4);}
.cr-final-td{background:rgba(15,24,38,.6);min-width:60px;}
.cr-input{width:50px;padding:6px 4px;border:1px solid transparent;border-radius:4px;font-family:'DM Sans',sans-serif;font-size:11px;font-weight:600;text-align:center;background:rgba(0,0,0,.35);color:var(--text);outline:none;transition:all .18s;}
.cr-input:focus{border-color:var(--red);background:rgba(192,0,10,.15);}
.cr-input::-webkit-outer-spin-button,.cr-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}
.cr-input[type=number]{-moz-appearance:textfield;}
.cr-gender-row{padding:6px 12px;background:linear-gradient(90deg,rgba(50,50,50,.8),rgba(30,30,30,.8));color:var(--text);font-size:11px;font-weight:700;text-align:left;letter-spacing:.5px;border:1px solid var(--border2);}
.cr-female-row{background:linear-gradient(90deg,rgba(74,0,48,.7),rgba(45,0,30,.7));}
.cr-final-badge{border-radius:10px;padding:3px 8px;font-size:10px;font-weight:800;display:inline-block;}

/* ══ ATTENDANCE TABLE ══ */
.att-legend{display:flex;align-items:center;gap:10px;margin-bottom:12px;flex-wrap:wrap;}
.att-key{padding:4px 11px;border-radius:20px;font-size:11.5px;font-weight:700;}
.att-p{background:rgba(46,204,113,.15);color:#5dde92;border:1px solid rgba(46,204,113,.3);}
.att-a{background:rgba(192,0,10,.15);color:#ff9090;border:1px solid rgba(192,0,10,.3);}
.att-l{background:rgba(212,160,23,.15);color:var(--gold);border:1px solid rgba(212,160,23,.3);}
.att-hint{font-size:11px;color:var(--muted);}
.att-day-hdr{padding:4px 1px;font-size:8px;min-width:19px;}
.att-sub-hdr{padding:4px 2px;font-size:8.5px;font-weight:700;min-width:24px;}
.att-total-hdr{padding:5px 4px;font-size:9.5px;font-weight:700;min-width:48px;}
.att-total-sub{padding:4px;font-size:9px;font-weight:700;color:#fff;min-width:24px;border:1px solid rgba(255,255,255,.12);text-align:center;}
.att-day-cell{padding:1px;}
.att-count-cell{padding:3px;font-size:9.5px;font-weight:700;text-align:center;color:var(--muted);}
.att-total-cell{padding:4px;font-size:10px;font-weight:700;text-align:center;background:var(--bg3);color:var(--muted);}
.att-input{width:18px;padding:2px 1px;border:1px solid transparent;border-radius:3px;font-family:'DM Sans',sans-serif;font-size:9.5px;font-weight:700;text-align:center;background:rgba(0,0,0,.25);color:var(--text);outline:none;text-transform:uppercase;transition:all .12s;}
.att-input:focus{border-color:rgba(255,255,255,.3);}
.att-p-cell{background:rgba(46,204,113,.22)!important;color:#5dde92!important;}
.att-a-cell{background:rgba(192,0,10,.22)!important;color:#ff9090!important;}
.att-l-cell{background:rgba(212,160,23,.22)!important;color:var(--gold)!important;}

/* ══ MODAL ══ */
.modal-overlay{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.75);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;padding:20px;}
.modal-card{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:32px 28px 24px;width:100%;max-width:520px;position:relative;box-shadow:0 40px 80px rgba(0,0,0,.6);max-height:90vh;overflow-y:auto;}
.modal-card::before{content:'';display:block;height:2px;border-radius:2px;background:linear-gradient(90deg,var(--red),var(--gold),transparent);margin-bottom:24px;}
.modal-close{position:absolute;top:12px;right:12px;background:var(--surface);border:1px solid var(--border);font-size:13px;cursor:pointer;color:var(--muted);width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s;}
.modal-close:hover{background:rgba(192,0,10,.2);color:#fff;}
.modal-title{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;color:var(--text);}
.modal-sub{font-size:12px;color:var(--muted);margin:4px 0 14px;}
.comp-table{width:100%;border-collapse:collapse;font-size:13px;margin-top:10px;}
.comp-table th{background:rgba(192,0,10,.2);color:var(--text);padding:9px 11px;text-align:left;font-weight:700;border-bottom:2px solid var(--border);}
.comp-table td{padding:9px 11px;border-bottom:1px solid var(--border2);color:var(--text2);}
.comp-step{background:rgba(212,160,23,.08);border-left:3px solid var(--gold);padding:10px 13px;border-radius:0 8px 8px 0;margin:10px 0;font-size:12.5px;color:var(--text2);}
.comp-step strong{color:var(--gold);}
.final-result{background:linear-gradient(135deg,var(--red),var(--red-dk));color:#fff;border-radius:12px;padding:18px 20px;text-align:center;margin-top:14px;}
.fr-num{font-size:42px;font-weight:900;font-family:'Playfair Display',serif;}
.fr-label{font-size:13px;opacity:.9;font-weight:600;}

/* ══ RESPONSIVE ══ */
@media(max-width:1050px){.tch-layout{grid-template-columns:200px 1fr;}}
@media(max-width:900px){
  .stu-layout,.tch-layout{grid-template-columns:1fr;}
  .stu-sidebar,.tch-sidebar{position:static;}
  .tch-header{flex-direction:column;}
  .tch-header-right{align-items:flex-start;}
}
@media(max-width:720px){
  .lp-left{display:none;}
  .lp-right{padding:40px 20px;}
  .lp-card{padding:26px 20px;}
}